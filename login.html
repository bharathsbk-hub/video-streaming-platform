<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Amplify Authentication</title>
    <script src="https://cdn.jsdelivr.net/npm/aws-amplify@4.0.0/dist/aws-amplify.min.js"></script>
    <script src="aws-exports.js"></script> <!-- Ensure this file is properly linked -->
</head>
<body>

    <!-- Sign Up Form -->
    <div id="sign-up-form">
        <h2>Sign Up</h2>
        <form id="sign-up">
            <label for="email">Email:</label>
            <input type="email" id="email" required><br><br>

            <label for="username">Username:</label>
            <input type="text" id="username" required><br><br>

            <label for="password">Password:</label>
            <input type="password" id="password" required><br><br>

            <button type="submit">Sign Up</button>
        </form>
    </div>

    <!-- Sign In Form -->
    <div id="sign-in-form" style="display: none;">
        <h2>Sign In</h2>
        <form id="sign-in">
            <label for="signin-email">Email:</label>
            <input type="email" id="signin-email" required><br><br>

            <label for="signin-password">Password:</label>
            <input type="password" id="signin-password" required><br><br>

            <button type="submit">Sign In</button>
        </form>
    </div>

    <script>
        // Initialize AWS Amplify using the awsConfig global variable
        Amplify.awsConfig = {
    Auth: {
        region: 'us-east-1', // Replace with your AWS region
        userPoolId: 'us-east-1_Oh0Lq68iE', // Replace with your Cognito User Pool ID
        userPoolWebClientId: '1r7c7073vrotgl0ilih1m8qa55', // Replace with your Web Client ID
    }
};

        console.log(typeof Amplify !== 'undefined' ? "Amplify loaded" : "Amplify is not loaded");

        // Sign up form submission
        document.getElementById("sign-up").addEventListener("submit", function(event) {
            event.preventDefault();

            const email = document.getElementById("email").value;
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            Amplify.Auth.signUp({
                username,
                password,
                attributes: { email }
            })
            .then(data => {
                console.log("Sign-up successful:", data);
                alert("Sign-up successful. Please check your email for verification.");
                document.getElementById("sign-up-form").style.display = "none";
                document.getElementById("sign-in-form").style.display = "block";
            })
            .catch(err => {
                console.error("Sign-up error:", err);
                alert("Error signing up: " + err.message);
            });
        });

        // Sign in form submission
        document.getElementById("sign-in").addEventListener("submit", function(event) {
            event.preventDefault();

            const email = document.getElementById("signin-email").value;
            const password = document.getElementById("signin-password").value;

            Amplify.Auth.signIn(email, password)
            .then(user => {
                console.log("Sign-in successful:", user);
                alert("Sign-in successful!");
            })
            .catch(err => {
                console.error("Sign-in error:", err);
                alert("Error signing in: " + err.message);
            });
        });
    </script>

</body>
</html>
